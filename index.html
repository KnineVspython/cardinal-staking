<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@cardinal/staking - v1.0.6</title><meta name="description" content="Documentation for @cardinal/staking - v1.0.6"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@cardinal/staking - v1.0.6</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@cardinal/staking - v1.0.6</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#cardinal-staking" id="cardinal-staking" style="color: inherit; text-decoration: none;">
  <h1>Cardinal Staking</h1>
</a>
<p><a href="https://github.com/cardinal-labs/cardinal-staking/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-AGPL%203.0-blue" alt="License"></a>
<a href="https://github.com/cardinal-labs/cardinal-staking/actions/workflows/release.yml"><img src="https://github.com/cardinal-labs/cardinal-staking/actions/workflows/release.yml/badge.svg?branch=v0.0.27" alt="Release"></a></p>
<p align="center">
    <img src="./images/banner.png" />
</p>

<p align="center">
    An open protocol for staking NFTs and FTs.
</p>


<a href="#background" id="background" style="color: inherit; text-decoration: none;">
  <h2>Background</h2>
</a>
<p>Cardinal staking encompasses a suite of contracts for issuing and staking NFTs and FTs. The simple program is a stake pool that tracks total stake duration. In addition, there is an implementation of a token minting reward distributor. Cardinal staking works well with any standard NFT collection and also composes with other programs in the Cardinal NFT infrastructure ecosystem.</p>

<a href="#packages" id="packages" style="color: inherit; text-decoration: none;">
  <h2>Packages</h2>
</a>
<table>
<thead>
<tr>
<th align="left">Package</th>
<th align="left">Description</th>
<th align="left">Version</th>
<th align="left">Docs</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>cardinal-stake-pool</code></td>
<td align="left">Stake pool tracking total stake duration</td>
<td align="left"><a href="https://crates.io/crates/cardinal-stake-pool"><img src="https://img.shields.io/crates/v/cardinal-stake-pool" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-stake-pool"><img src="https://docs.rs/cardinal-stake-pool/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>cardinal-reward-distributor</code></td>
<td align="left">Simple token minting rewards distributor</td>
<td align="left"><a href="https://crates.io/crates/cardinal-reward-distributor"><img src="https://img.shields.io/crates/v/cardinal-reward-distributor" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-reward-distributor"><img src="https://docs.rs/cardinal-reward-distributor/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>@cardinal/staking</code></td>
<td align="left">TypeScript SDK for staking</td>
<td align="left"><a href="https://www.npmjs.com/package/@cardinal/staking"><img src="https://img.shields.io/npm/v/@cardinal/staking.svg" alt="npm"></a></td>
<td align="left"><a href="https://cardinal-labs.github.io/cardinal-staking/"><img src="https://img.shields.io/badge/docs-typedoc-blue" alt="Docs"></a></td>
</tr>
</tbody></table>

<a href="#addresses" id="addresses" style="color: inherit; text-decoration: none;">
  <h2>Addresses</h2>
</a>
<p>Program addresses are the same on devnet, testnet, and mainnet-beta.</p>
<ul>
<li>StakePool: <a href="https://explorer.solana.com/address/stkBL96RZkjY5ine4TvPihGqW8UHJfch2cokjAPzV8i"><code>stkBL96RZkjY5ine4TvPihGqW8UHJfch2cokjAPzV8i</code></a></li>
<li>RewardDistributor: <a href="https://explorer.solana.com/address/rwdNPNPS6zNvtF6FMvaxPRjzu2eC51mXaDT9rmWsojp"><code>rwdNPNPS6zNvtF6FMvaxPRjzu2eC51mXaDT9rmWsojp</code></a></li>
</ul>

<a href="#plugins" id="plugins" style="color: inherit; text-decoration: none;">
  <h2>Plugins</h2>
</a>
<p>Cardinal stake pool is meant to be composable. A simple reward distributor is provided out of the box, but any complex reward distribution logic can be implemented in a similar manner. Other implementations of other reward distributors are welcomed and encouraged. Examples that could be built:</p>
<ul>
<li>Tiered reward system that distributes rewards based on specified stake tiers</li>
<li>Arbitrary non-linear reward functions</li>
<li>NFT mutator that modifies metadata based on stake duration</li>
<li>Probabilistic distributor that may or may not give a reward depending on the outcome of a random iteration. This could apply to a quest or mission with a given probability of success</li>
</ul>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h2>Documentation</h2>
</a>
<p><strong>Stake Receipts</strong></p>
<p>Stake pool is designed to support general staking, as well as a enabling a concept of stake receipts.</p>
<blockquote>
<p>Receipts is a feature that allows the user to have a representation of the staked NFT in their wallet</p>
</blockquote>
<ul>
<li><p><code>ReceiptType::Original</code></p>
<ul>
<li>When staking using the original receipt type, when staking the user token(s) will be locked into the staker&#39;s wallet, and the stake timer will begin.</li>
<li>This allows users to continue holding their tokens while they&#39;re staked which can be advantageous for several reasons including allowing them to continue participating in DAOs and gated discord servers.</li>
<li>While it does sit in their wallet, the token is frozen while it is staked and thus cannot be traded/sent to anyone else. The locked aspect of staking that projects hope to achieve is thus not compromised in any way.</li>
<li>In order to unstake, this locked token must first be unfrozen and returned to the stake pool. The current implementation leverages the Cardinal Token Manager and the invalidation type of &quot;Return&quot;. The way this works is that upon staking, the token is issued back to the staker from the stake pool with an associated Token Manager wrapper. Then, when the user decides to unstake, the token manager is invalidated, and the token is programatically returned back to the pool. Now back in the pool and unwrapped, the token can be freely claimed by user. The client abstracts this invalidation and return inside of the unstake api.</li>
</ul>
</li>
<li><p><code>ReceiptType::Receipt</code></p>
<ul>
<li>Optionally the user can also claim a generated NFT receipt</li>
<li>Using stake type of receipt, a new copy NFT will be transferred to user. The receipt metadata is dynamic by default and uses the Cardinal metadata and img-generators hosted at <a href="https://api.cardinal.so/metadata">https://api.cardinal.so/metadata</a> and <a href="https://api.cardinal.so/img">https://api.cardinal.so/img</a> respectively.</li>
<li>This approach is additionally beneficial because the receipt can be clearly identified in the wallet as a staked NFT rather than a just locked one because of the mutable and dynamic nature of its metadata that allows for relevant markers/metrics to be displayed.</li>
<li>The current staker can unstake at any time which increments the stake timer for that mint</li>
<li>Any unstaking requires returning the receipt before the unstake instruction can be called. This can be done via the Cardinal Token Manager with &#39;InvalidationType::Return&#39;. Similar to how returning locked tokens works, this will is handled automatically by the client unstake api.</li>
</ul>
</li>
</ul>

<a href="#questions-amp-support" id="questions-amp-support" style="color: inherit; text-decoration: none;">
  <h2>Questions &amp; Support</h2>
</a>
<p>If you are developing using Cardinal staking contracts and libraries, feel free to reach out for support on Discord. We will work with you or your team to answer questions, provide development support and discuss new feature requests.</p>
<p>For issues please, file a GitHub issue.</p>
<blockquote>
<p><a href="https://discord.gg/bz2SxDQ8">https://discord.gg/bz2SxDQ8</a></p>
</blockquote>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p>Cardinal Protocol is licensed under the GNU Affero General Public License v3.0.</p>
<p>In short, this means that any changes to this code must be made open source and available under the AGPL-v3.0 license, even if only used privately.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/rewardDistributor.html">reward<wbr/>Distributor</a></li><li class=" tsd-kind-namespace"><a href="modules/stakePool.html">stake<wbr/>Pool</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-function"><a href="modules.html#authorizeStakeEntry" class="tsd-kind-icon">authorize<wbr/>Stake<wbr/>Entry</a></li><li class="tsd-kind-function"><a href="modules.html#claimRewards" class="tsd-kind-icon">claim<wbr/>Rewards</a></li><li class="tsd-kind-function"><a href="modules.html#createRewardDistributor" class="tsd-kind-icon">create<wbr/>Reward<wbr/>Distributor</a></li><li class="tsd-kind-function"><a href="modules.html#createStakeEntry" class="tsd-kind-icon">create<wbr/>Stake<wbr/>Entry</a></li><li class="tsd-kind-function"><a href="modules.html#createStakeEntryAndStakeMint" class="tsd-kind-icon">create<wbr/>Stake<wbr/>Entry<wbr/>And<wbr/>Stake<wbr/>Mint</a></li><li class="tsd-kind-function"><a href="modules.html#createStakePool" class="tsd-kind-icon">create<wbr/>Stake<wbr/>Pool</a></li><li class="tsd-kind-function"><a href="modules.html#createStakePoolAndRewardDistributor" class="tsd-kind-icon">create<wbr/>Stake<wbr/>Pool<wbr/>And<wbr/>Reward<wbr/>Distributor</a></li><li class="tsd-kind-function"><a href="modules.html#executeTransaction" class="tsd-kind-icon">execute<wbr/>Transaction</a></li><li class="tsd-kind-function"><a href="modules.html#getMintSupply" class="tsd-kind-icon">get<wbr/>Mint<wbr/>Supply</a></li><li class="tsd-kind-function"><a href="modules.html#stake" class="tsd-kind-icon">stake</a></li><li class="tsd-kind-function"><a href="modules.html#unstake" class="tsd-kind-icon">unstake</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>